<!-- extends base template and displays admin interface-->

{% extends 'admin/admin_base.html' %}
{% block title %} Parking App -Admin {% endblock %}



{%block content%}
<link rel="stylesheet" href="/static/view.css">
<div class="header" >Parking Lots</div>

<link rel="stylesheet" href="/static/popup.css">

 {%for lot in lots%}
<div class="lot-box" style="font-size: 1.25rem; font-family: 'Shadows Into Light', 'Comic Sans MS', cursive; ">
    <h2 style="font-size: 1.5rem;font-family: 'Shadows Into Light', 'Comic Sans MS', cursive; ">{{ lot[1] }}</h2>
    <div class="lot-actions">
<label for="edit-modal-toggle-{{lot['id']}}" class="edit" style="cursor: pointer;">Edit</label> | <label for="delete-modal-toggle" class="delete" style="cursor: pointer;">Delete</label>


    <input type="checkbox" id="edit-modal-toggle-{{lot['id']}}" class="modal-toggle" hidden>

    <div class="modal">
        <div class="modal-content">
            <label for="edit-modal-toggle-{{lot['id']}}" class="close-btn" >X</label>
<h3 class="modal-heading">Book a parking spot</h3>
<div class="form-wrapper">

            <form method="POST" class="booking-form-horizontal">
                                <input type="hidden" name="form_type" value="edit_lot">


                <input type="text" name="lot_id" value="{{lot['id']}}" hidden readonly>

<div class="form-row">
    <label for="prime_location">Prime Location</label>
                <input type="text" name="prime_location" value="{{lot['prime_location']}}" required>
                </div>
<div class="form-row">
    <label for="address">Address</label>
                <input type="text" name="address" value="{{lot['address']}}" required>
</div>
<div class="form-row">
    <label for="pincode">Pincode</label>
                <input type="text" name="pincode" value="{{lot['pincode']}}" required>
</div>
<div class="form-row">
    <label for="price">Price</label>
                <input type="number" name="price" value="{{lot['price']}}" required>
</div>
<div class="form-row">
    <label for="max_no_of_spots">Max No of Spots in Lot</label>
                <input type="number" name="max_no_of_spots" value="{{lot['max_no_of_spots']}}" required>
</div>
<div class="form-actions">

                <button type="submit" class ="btn-wide">Update</button>
                        <label for="edit-modal-toggle-{{lot['id']}}" class="btn-wide cancel-btn">Cancel</label>
            </form>
        </div>
        </div>
    </div>
</div>
    </div>
    <div class="occupancy">(Occupied: )</div>
    <hr>

    <div class="spot-grid">
        {% for spotss in spots %}
        {%for spot in spotss%}
        {%if spot['lot_id']== lot['id']%}
            <label for="modal-{{ spot[0] }}" class="spot {% if spot[3] == 'A' %}available{% else %}occupied{% endif %}">
                {{ spot[3] }}
            </label>

            <input type="checkbox" id="modal-{{ spot[0] }}" class="modal-toggle" hidden>

            <div class="modal">
                <div class="modal-content">
                    <label for="modal-{{ spot[0] }}" class="close-btn">X</label>
                    <h4>{{ spot['spot_number'] }}</h4>
                    <p>Status: {{ spot['status']}}</p>
                    <p>{{ spot['status'] }}</p>
                </div>
            </div>
        {%endif%}
        {% endfor %}
        {%endfor%}
    </div>
</div>
{%endfor%}

<link rel="stylesheet" href="/static/popup.css">

<div style="margin-top: 40px; text-align: center;">
    <label for="modal-toggle" class="btn btn-primary-add"style="font-size:1.5rem; padding:12px 24px;">+ Add Lot</label>
</div>
    <input type="checkbox" id="modal-toggle" class="modal-toggle" hidden>

    <div class="modal">
        <div class="modal-content">
            <label for="modal-toggle" class="close-btn" >X</label>
            <h3 class="modal-heading">Create a New Parking Lot</h3>
        <div class="form-wrapper">            
            <form method="POST" class="booking-form-horizontal">
                <input type="hidden" name="form_type" value="create_lot">
<div class="form-row">
    <label for="prime_location">Prime Location</label>
                <input type="text" name="prime_location" placeholder="Lot Prime Location Name" required><br>
</div>
<div class="form-row">
    <label for="address">Address</label>
                <input type="text" name="address" placeholder="Address" required><br>
</div>
<div class="form-row">

    <label for="pincode">Pincode</label>
                <input type="text" name="pincode" placeholder="Pincode" required><br>
</div>
<div class="form-row">

    <label for="max_no_of_spots">Number of Spots</label>
                <input type="number" name="max_no_of_spots" placeholder="Max Spots" required><br>
</div>
<div class="form-row">

    <label for="price">Price(per hour)</label>
                <input type="number" name="price" placeholder="Price per Hour" required><br>
</div>

<div class="form-actions">
                <button type="submit" class="btn-wide">Create Lot</button>
                        <label for="modal-toggle" class="btn-wide cancel-btn">Cancel</label>
            </form>
            </div>
        </div>
        </div>
        </div>
        
    </div>



{%endblock%}


